<!doctype html><html><head><title>Doc</title><body><dl><dd><a href="#a0">define(</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a1">sendMessage </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a2">addRecipient </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a3">processMessages </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a4">getAllMessages </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a5">getMessage </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a6">getUnreadMessagesCountOverview </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a7">getUnreadMessageCount </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a8">sendMessageToGroup </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a9">},</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a10">inviteUser </a></dd></dl><pre id="a0">define(</pre><p><b>class</b> Communication  <br/><b>description</b> Communication related convenience functions. This should only hold functions which are used across multiple pages, and does not constitute functionality related to a single area/pag  <br/><b>namespace</b> Communication related convenience functions </p><br/><pre id="a1">sendMessage : function(to, meData, subject, body, category, reply, callback, sendMail, context, optionalParams) {</pre><p>Sends a Sakai message to one or more users. If a group id is received, the message is sent to users that are members of that group.  <br/><b>param {Array|String}</b> to Array with the ids of the users or groups to post a message to or a String with one user or group id. <br/><b>param {String}</b> meData Who the message is from - sakai.data.me (or equivolent profile) <br/><b>param {String}</b> subject The subject for this message <br/><b>param {String}</b> body The text that this message will contain <br/><b>param {String}</b> [category='message'] The category for this message <br/><b>param {String}</b> [reply] The id of the message you are replying on <br/><b>param {Function}</b> [callback] A callback function which is executed at the end of the operation <br/><b>param {Boolean}</b> [sendMail] True if a mail needs to be sent, False if no mail is needed. Unles specified false the default will be true and a mail will be sent <br/><b>param {Boolean|String}</b> [context] String used in switch to set sakai:templatePath and sakai:templateParams <br/><b>param {Object}</b> [optionalParams] Passed in when out of the group context to provide data necessary to send the message (Ids, titles) that can't be retrieved from the global object  </p><br/><pre id="a2">var addRecipient = function(userids) {</pre><p>Adds the given userids (String or Array) to the current list of recipients <br/><b>param {Array|String}</b> userids Either a single userid (String) or a list of userids (Array) to be added to the current list of recipients <br/><b>return</b> None </p><br/><pre id="a3">processMessages : function(results) {</pre><p>Processes the messages from the server, stripping out everything we don't need </p><br/><pre id="a4">getAllMessages : function(box, category, search, messagesPerPage, currentPage, sortBy, sortOrder, callback, doProcessing, doFlip) {</pre><p>Gets all messages from a box  <br/><b>param {String}</b> box The name of the box to get messages from <br/><b>param {String}</b> category The type of messages to get from the box <br/><b>param {Number}</b> messagesPerPage The number of messages to fetch <br/><b>param {Number}</b> currentPage The page offset to start from <br/><b>param {String}</b> sortBy The name of the field to sort on <br/><b>param {String}</b> sortOrder Sort messages asc or desc <br/><b>param {Function}</b> callback The function that will be called on completion <br/><b>param {Boolean}</b> doProcessing process the messages after they come back to make them easier to deal with defaults to true <br/><b>param {Boolean}</b> doFlip Flip the to and from </p><br/><pre id="a5">getMessage : function(id, box, meData, callback) {</pre><p>Retrieve a message based on its box and its id. This function will also include the user that has sent the message <br/><b>param {String}</b> id            Unique id of the message <br/><b>param {String}</b> box           Message box the message lives in. The possible options are inbox, outbox and trash <br/><b>param {Object}</b> meData        Me object <br/><b>param {Function}</b> callback    Function to call once the message has been retrieved </p><br/><pre id="a6">getUnreadMessagesCountOverview : function(box, callback, ignoreCache) {</pre><p>Gets a count of the unread messages for each box belonging to the current user </p><br/><pre id="a7">getUnreadMessageCount : function(box, callback, category) {</pre><p>Gets a count of the unread messages in a box belonging to the current user </p><br/><pre id="a8">sendMessageToGroup : function(groupID, message) {</pre><p>Sends a message to all members of a group  <br/><b>param {String}</b> groupID The user ID of the recipient <br/><b>param {String}</b> message The text of the message <br/><b>return {Boolean}</b> true or false depending on whether the sending was successful or not </p><br/><pre id="a9">},</pre><p>SAKIII-599: Unable to currently send a message via: - /~userid/message.create.html or - /~groupid/message.create.html  Until backend support is available, sakai.api.Communication.sendMessage has been modified to support groupids. Any groupids included in the 'to' list argument will be expanded and messages sent to those users.  Once backend support to message a group directly is available, it will be important to complete this function to support posting messages to group pages directly and to track messages sent to groups as opposed to individual users (i.e. Message sent to: 'user1, user2, group5' instead of Message sent to: 'user1, user2, [list of users in group5]') </p><br/><pre id="a10">inviteUser : function(userID) {</pre><p>Invites a user to become a contact of the logged in user  <br/><b>param {String}</b> groupID The user ID of the recipient <br/><b>param {String}</b> message The text of the message <br/><b>return {Boolean}</b> true or false depending on whether the sending was successful or not </p><br/></body></html>