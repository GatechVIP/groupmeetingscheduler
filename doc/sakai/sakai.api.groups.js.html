<!doctype html><html><head><title>Doc</title><body><dl><dd><a href="#a0">define(</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a1">getGroupData </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a2">getGroupInformation</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a3">getGroupAuthorizableData </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a4">createGroup </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a5">deleteGroup </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a6">updateGroupInfo </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a7">updateGroupProfile </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a8">isValidPermissionsProperty </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a9">setPermissions </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a10">isCurrentUserAManager </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a11">isCurrentUserAMember </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a12">isAllowedToLeave </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a13">getManagerCount </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a14">addJoinRequest </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a15">removeJoinRequest </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a16">getJoinRequests </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a17">searchMembers</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a18">getMembers </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a19">hasManagementRights </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a20">getProfilePicture </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a21">prepareGroupsForRender</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a22">changeUsersPermission </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a23">addUsersToGroup </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a24">addContentToGroup </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a25">removeUsersFromGroup </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a26">removeContentFromGroup </a></dd></dl><pre id="a0">define(</pre><p><b>class</b> Groups  <br/><b>description</b> Group related convenience functions. This should only hold functions which are used across multiple pages, and does not constitute functionality related to a single area/page  <br/><b>namespace</b> Group related convenience functions </p><br/><pre id="a1">getGroupData : function(groupid, callback, async, cache) {</pre><p>Get the data for the specified group  <br/><b>param {String}</b> groupid The ID of the group <br/><b>param {Function}</b> callback Callback function, passes (success, (data|xhr)) <br/><b>param {Boolean}</b> async If this call should be ascynronous, defaults to true </p><br/><pre id="a2">getGroupInformation: function(options, callback) {</pre><p>Gets information for specified group  <br/><b>param {Object}</b> options Contains function parameters <br/><b>param {Function}</b> callback Callback function, passes ( {Boolean} success, {Object} data )  </p><br/><pre id="a3">getGroupAuthorizableData : function(groupids, callback) {</pre><p>Get the data for the specified group  <br/><b>param {Object}</b> groupids The ID of the group or an array of group IDs <br/><b>param {Function}</b> callback Callback function, passes (success, (data|xhr)) <br/><b>param {Boolean}</b> async If this call should be ascynronous, defaults to true </p><br/><pre id="a4">createGroup : function(id, title, description, tags, users, joinability, visibility, templatePath, subject, body, meData, callback) {</pre><p>Create a group <br/><b>param {String}</b> id the id of the group that's being created <br/><b>param {String}</b> title the title of the group that's being created <br/><b>param {String}</b> description the description of the group that's being created <br/><b>param {Array}</b> tags The tags to tag the group with on creation <br/><b>param {Array}</b> users An array of users of the format: 'name': user name 'firstName': user's first name 'userid': user's userid 'role': the permission to give the user (manager, member, ta) 'roleString': The translated role string to give the user ('Member', 'Manager', 'Teaching Assistant') 'creator': true | false (if this user is the creator of the group) <br/><b>param {String}</b> joinability The joinability of the group (yes, no, withauth) <br/><b>param {String}</b> visibility The visibility of the group (members-only, logged-in-only, public) <br/><b>param {String}</b> templatePath The path in the /var/templates/worlds space for this template, without .json (/var/templates/worlds/group/basic-group) <br/><b>param {String}</b> subject The tokenized subject of the message (translated) to send to the users joined to this group <br/><b>param {String}</b> body The body of the aforementioned message in the same format <br/><b>param {Object}</b> meData The sakai.data.me object <br/><b>param {Function}</b> callback the callback function for when the group save is complete. It will pass two params, success {Boolean} and nameTaken {Boolean} </p><br/><pre id="a5">deleteGroup : function(groupID, meData, callback) {</pre><p>Delete a group <br/><b>param {String}</b> id the id of the group that's being deleted <br/><b>param {Function}</b> callback the callback function for when the group delete is complete. </p><br/><pre id="a6">updateGroupInfo : function(id, title, description, kind, callback) {</pre><p>Update group basic information  <br/><b>param {String}</b> id The id of the group to update <br/><b>param {String}</b> title The new title of the group <br/><b>param {String}</b> description The new description of the group <br/><b>param {String}</b> kind The kind of group, defined in (TODO define this somewhere, currently only in groupbasicinfo.html) <br/><b>param {Function}</b> callback Callback function, passes (success) </p><br/><pre id="a7">updateGroupProfile : function(id, profile, tags, groupData, callback) {</pre><p>Update group profile  <br/><b>param {String}</b> id The id of the group to update <br/><b>param {Object}</b> profile The group's profile <br/><b>param {Array}</b> tags The group's tags <br/><b>param {Object}</b> groupData The group's authprofile data - need this for role extraction <br/><b>param {Function}</b> callback Callback function, passes (success, updated) </p><br/><pre id="a8">isValidPermissionsProperty : function(permissionsProperty, value) {</pre><p>Checks whether the given value is valid as defined by the given permissionsProperty.  <br/><b>param {Object}</b> permissionsProperty Permissions property object (i.e. sakai.config.Permissions.Groups.joinable) with valid values to check against <br/><b>param {Object}</b> value Value to investigate <br/><b>return</b> true if the value has a valid property value, false otherwise </p><br/><pre id="a9">setPermissions : function(groupid, joinable, visible, roles, callback) {</pre><p>Public function used to set joinability and visibility permissions for a group with groupid.  <br/><b>param {String}</b> groupid The id of the group that needs permissions set <br/><b>param {String}</b> joinable The joinable state for the group (from sakai.config.Permissions.Groups) <br/><b>param {String}</b> visible The visibile state for the group (from sakai.config.Permissions.Groups) <br/><b>param {Array}</b> roles The roles for this group, from the 'sakai:roles' property of the group <br/><b>param {Function}</b> callback Function to be called on complete - callback args: (success) <br/><b>return</b> None </p><br/><pre id="a10">isCurrentUserAManager : function(groupid, meData, groupinfo) {</pre><p>Determines whether the current user is a manager of the given group.  <br/><b>param</b> groupid {String} id of the group to check <br/><b>param {Object}</b> meData the data from sakai.api.User.data.me <br/><b>return</b> true if the current user is a manager, false otherwise </p><br/><pre id="a11">isCurrentUserAMember : function(groupid, meData) {</pre><p>Determines whether the current user is a member of the given group. Managers are considered members of a group. If the current user is a manager of the group, this function will return true.  <br/><b>param</b> groupid {String} id of the group to check <br/><b>param {Object}</b> meData the data from sakai.api.User.data.me <br/><b>return</b> true if the current user is a member or manager, false otherwise </p><br/><pre id="a12">isAllowedToLeave : function(groupids, meData, callback) {</pre><p>Determines whether the current user is allowed to leave the group  <br/><b>param</b> groupid {String} id of the group to check <br/><b>param {Object}</b> meData the data from sakai.api.User.data.me <br/><b>param {Function}</b> callback Function to be called on complete - callback </p><br/><pre id="a13">getManagerCount : function(groupdata, members) {</pre><p>Get the number of managers in the group  <br/><b>param {Object}</b> groupdata The data from the group's authprofile <br/><b>param {Object}</b> members The result of sakai.api.Groups.getMembers() </p><br/><pre id="a14">addJoinRequest : function(groupID, callback) {</pre><p>Creates a join request for the current user for a given group <br/><b>param {String}</b> groupID     ID of the group to the user wants to join <br/><b>param {Function}</b> callback  Callback function executed at the end of the operation - callback args: -- {Boolean} success       True if operation succeeded, false otherwise </p><br/><pre id="a15">removeJoinRequest : function(userID, groupID, callback) {</pre><p>Removes a join request for the given user for the specified group  <br/><b>param {String}</b> userID ID of the user that wants to join the group <br/><b>param {String}</b> groupID ID of the group to the user wants to join <br/><b>param {Function}</b> callback Callback function executed at the end of the operation - callback args: -- {Boolean} success True if operation succeeded, false otherwise </p><br/><pre id="a16">getJoinRequests : function(groupID, callback, async) {</pre><p>Returns all join requests for the specified group  <br/><b>param {String}</b> groupID ID of the group to fetch join requests for <br/><b>param {Function}</b> callback Callback function executed at the end of the <br/><b>param {Boolean}</b> async Optional argument to set whether this operation is asynchronous or not. Default is true. operation - callback args: -- {Boolean} success true if operation succeeded, false otherwise -- {Object} joinrequest data if successful </p><br/><pre id="a17">searchMembers: function(groupId, query, num, page, sort, sortOrder, callback, roleCache) {</pre><p>Searches through managers and members of a group and returns the results <br/><b>param {String}</b> groupId Id of the group to search in <br/><b>param {String}</b> query Query put in by the user, if empty a search for all participants is executed <br/><b>param {Number}</b> num The number of items to search for (page size) <br/><b>param {Number}</b> page The current page (0-indexed) <br/><b>param {String}</b> sort The parameter to sort on (firstName or lastName) <br/><b>param {String}</b> sortOrder The direction of the sort (desc or asc) <br/><b>param {Function}</b> callback Function executed on success or error <br/><b>param {Boolean}</b> roleCache Flag to get group role data from cache if available </p><br/><pre id="a18">getMembers : function(groupids, callback, everyone, noCache) {</pre><p>Returns all the users who are member of a certain group  <br/><b>param {String}</b> groupids The ID of the group we would like to get the members of or an array of group IDs <br/><b>param {Function}</b> callback Callback function, passes (success, (data|xhr)) <br/><b>param {Boolean}</b> everyone If we should return managers + members (useful for pseudoGroups) <br/><b>param {Boolean}</b> noCache Whether or not to refresh the cache </p><br/><pre id="a19">hasManagementRights : function(parentRoleObject, roleIdToCheck) {</pre><p>Checks if one role managers the other, returns true if the role has management rights  <br/><b>param {Object}</b> parentRoleObject The role we want to check if it has management rights on the other <br/><b>param {String}</b> roleIdToCheck The role to check if it can be managed by </p><br/><pre id="a20">getProfilePicture : function(profile) {</pre><p>Retrieves the profile picture for the group  <br/><b>param {Object}</b> profile the groups profile <br/><b>return {String}</b> the url for the profile picture </p><br/><pre id="a21">prepareGroupsForRender: function(results, meData) {</pre><p>Function to process search results for groups  <br/><b>param {Object}</b> results Search results to process <br/><b>param {Object}</b> meData User object for the user <br/><b>returns {Object}</b> results Processed results </p><br/><pre id="a22">changeUsersPermission : function(groupID, rolesToAdd, rolesToDelete, medata, managerShip, callback) {</pre><p>Change the permission of some users on a group  <br/><b>param {String}</b> groupID the ID of the group to add members to <br/><b>param {Array}</b> rolesToAdd Array of user/group IDs to add to the group <br/><b>param {Array}</b> rolesToDelete Array of user/group IDs to remove from the group <br/><b>param {Object}</b> meData the data from sakai.api.User.data.me <br/><b>param {Boolean}</b> managerShip if the user should be added as a manager of the group (almost never is the case) <br/><b>param {Function}</b> callback Callback function </p><br/><pre id="a23">addUsersToGroup : function(groupID, users, medata, managerShip, callback, onlyReturnRequests) {</pre><p>Add users to the specified group  <br/><b>param {String}</b> groupID the ID of the group to add members to <br/><b>param {Array}</b> users Array of user/group IDs to add to the group <br/><b>param {Object}</b> meData the data from sakai.api.User.data.me <br/><b>param {Boolean}</b> managerShip if the user should be added as a manager <br/><b>param {Function}</b> callback Callback function <br/><b>param {Boolean}</b> onlyReturnRequests only return the requests, don't make them </p><br/><pre id="a24">addContentToGroup : function(groupID, contentIDs, callback) {</pre><p>Add content items to the specified group  <br/><b>param {String}</b> groupID the ID of the group to add members to <br/><b>param {Array}</b> contentList Array of content IDs to add to the group <br/><b>param {Function}</b> callback Callback function </p><br/><pre id="a25">removeUsersFromGroup : function(groupID, users, medata, callback, onlyReturnRequests) {</pre><p>Remove users from the specified group  <br/><b>param {String}</b> groupID the ID of the group to remove members from <br/><b>param {Array}</b> users Array of user/group IDs to remove from the group <br/><b>param {Object}</b> meData the data from sakai.api.User.data.me <br/><b>param {Function}</b> callback Callback function <br/><b>param {Boolean}</b> onlyReturnRequests only return the requests, don't make them </p><br/><pre id="a26">removeContentFromGroup : function(groupID, contentIDs, callback) {</pre><p>Add users to the specified group  <br/><b>param {String}</b> groupID the ID of the group to add members to <br/><b>param {Array}</b> content Array of content IDs to remove from the group <br/><b>param {Function}</b> callback Callback function </p><br/></body></html>