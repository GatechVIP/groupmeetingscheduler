<!doctype html><html><head><title>Doc</title><body><dl><dd><a href="#a0">define(</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a1">getTemplates</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a2">createSakaiDate </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a3">convertToHumanReadableFileSize </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a4">formatTags </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a5">tagEntity </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a6">deleteTags </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a7">applyThreeDots </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a8">replaceTemplateParameters </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a9">constructProfilePicture </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a10">determineEmptyContent</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a11">notification </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a12">show </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a13">removeAll </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a14">type </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a15">INFORMATION </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a16">ERROR </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a17">progressIndicator</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a18">showProgressIndicator</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a19">hideProgressIndicator</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a20">parseSakaiDate </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a21">parseRFC822Date </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a22">insertTag </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a23">checkForTag </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a24">js </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a25">css </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a26">Sorting </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a27">naturalSort</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a28">loadSkinsFromConfig </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a29">setPageTitle </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a30">convertToHierarchy </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a31">buildNodeRecursive </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a32">getValueForDirectoryKey </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a33">getValueForDirectoryTag</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a34">createActivity </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a35">getCurrentGMTTime </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a36">safeURL</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a37">saneHTMLAttribute</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a38">templateCache </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a39">processMacros </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a40">processLocalMacros </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a41">TemplateRenderer </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a42">escapeHTML </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a43">unescapeHTML </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a44">replaceURL </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a45">saneHTML </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a46">removeExpression </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a47">send404 </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a48">send403 </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a49">sendToLogin </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a50">renderMath </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a51">makeSafeTag </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a52">makeUniqueURL </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a53">hideOnClickOut </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a54">setup </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a55">open </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a56">close </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a57">positionDialogBox </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a58">bindDialogFocus </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a59">extractEntity </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a60">setup</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a61">reset</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a62">destroy</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a63">setupTagAndCategoryAutosuggest</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a64">getTagsAndCategories</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a65">validate</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a66">setDraggableParameters</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a67">setupDraggable</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a68">setIFrameFix</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a69">removeIFrameFix</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a70">setDroppableParameters</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a71">setupDroppable</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a72">replaceInObject</a></dd></dl><pre id="a0">define(</pre><p><b>class</b> Util  <br/><b>description</b> General utility functions which implement commonly used low level operations and unifies practices across codebase.  <br/><b>namespace</b> General utility functions </p><br/><pre id="a1">getTemplates: function(callback) {</pre><p>Get the world templates from the server If the worldTemplates are already fetched they will just be returned from the variable <br/><b>param {Function}</b> callback Function executed after the templates have been fetched. The templates are passed through to the function </p><br/><pre id="a2">createSakaiDate : function(date, format, offset) {</pre><p>Parse a JavaScript date object to a JCR date string (2009-10-12T10:25:19)  &lt;p&gt; Accepted values for the format [1-6]: &lt;ol&gt; &lt;li&gt;Year: YYYY (eg 1997)&lt;/li&gt; &lt;li&gt;Year and month: YYYY-MM &lt;br /&gt; (eg 1997-07)&lt;/li&gt; &lt;li&gt;Complete date: YYYY-MM-DD &lt;br /&gt; (eg 1997-07-16)&lt;/li&gt; &lt;li&gt;Complete date plus hours and minutes: YYYY-MM-DDThh:mmTZD &lt;br /&gt; (eg 1997-07-16T19:20+01:00)&lt;/li&gt; &lt;li&gt;Complete date plus hours, minutes and seconds: YYYY-MM-DDThh:mm:ssTZD &lt;br /&gt; (eg 1997-07-16T19:20:30+01:00)&lt;/li&gt; &lt;li&gt;Complete date plus hours, minutes, seconds and a decimal fraction of a second YYYY-MM-DDThh:mm:ss.sTZD &lt;br /&gt; (eg 1997-07-16T19:20:30.45+01:00)&lt;/li&gt; &lt;/ol&gt; &lt;/p&gt; &lt;p&gt; External links: &lt;ul&gt; &lt;li&gt;&lt;a href='http://www.w3.org/TR/NOTE-datetime'&gt;W3C datetime documentation&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href='http://delete.me.uk/2005/03/iso8601.html'&gt;ISO8601 JavaScript function&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href='http://confluence.sakaiproject.org/display/KERNDOC/KERN-643+Multiple+date+formats+in+the+back-end'&gt;Specification&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/p&gt; <br/><b>param {Date}</b> date JavaScript date object. If not set, the current date is used. <br/><b>param {Integer}</b> format The format you want to put out <br/><b>param {String}</b> offset Optional timezone offset +HH:MM or -HH:MM, if not set Z(ulu) or UTC is used <br/><b>return {String}</b> a JCR date string </p><br/><pre id="a3">convertToHumanReadableFileSize : function(filesize) {</pre><p>Convert a file's size to a human readable size example: 2301 = 2.301kB  <br/><b>param</b> (Integer) filesize The file's size to convert <br/><b>return</b> (String) the file's size in human readable format </p><br/><pre id="a4">formatTags : function(inputTags) {</pre><p>Formats a comma separated string of text to an array of usable tags Filters out unwanted tags (eg empty tags) Returns the array of tags, if no tags were provided or none were valid an empty array is returned  Example: inputTags = 'tag1, tag2, , , tag3, , tag4' returns ['tag1','tag2','tag3','tag4']  <br/><b>param {String}</b> inputTags Unformatted, comma separated, string of tags put in by a user <br/><b>return {Array}</b> Array of formatted tags </p><br/><pre id="a5">tagEntity : function(tagLocation, newTags, currentTags, callback) {</pre><p>Add and delete tags from an entity The two arrays, newTags and currentTags, represent the state of tags on the entity newTags should be the tags that you want on the entity, the whole set currentTags should be the set of tags the entity had before the user modified it tagEntity will delete any tags in currentTags but not in newTags, and add any in newTags that aren't in currentTags  <br/><b>param</b> (String) tagLocation the URL to the tag, ie. (~userid/public/authprofile) <br/><b>param</b> (Array) newTags The set of tags you wish to be on the entity <br/><b>param</b> (Array) currentTags The set of tags on the current entity <br/><b>param</b> (Function) callback The callback function </p><br/><pre id="a6">var deleteTags = function(tagLocation, tags, deleteTagsCallback) {</pre><p>Delete tags on a given node  <br/><b>param</b> (String) tagLocation the URL to the tag, ie. (~userid/public/authprofile) <br/><b>param</b> (Array) tags Array of tags to be deleted from the entity <br/><b>param</b> (Function) callback The callback function </p><br/><pre id="a7">applyThreeDots : function(body, width, params, optClass, alreadySecure) {</pre><p>Truncate a string of text using the threedots plugin <br/><b>param {String}</b> body String of text to be truncated <br/><b>param {int}</b> width Width of the parent element <br/><b>param {Object}</b> params Object containing parameters, Threedots plugin specific. The row limit for widget headers should be 4 rows. <br/><b>param {String}</b> Optional class(es) to give container div. Used to give specific mark-up to the content to avoid wrong calculations. e.g. s3d-bold </p><br/><pre id="a8">replaceTemplateParameters : function(variables, replaceIn) {</pre><p>Search for and replace parameters in a template (replaces both keys and properties) primarily used for making unique IDs for the group/course templates in config.js  <br/><b>param {Object}</b> variables The variables to replace in the template with, ie. 'groupid' <br/><b>param {Object}</b> replaceIn The object to modify <br/><b>return {Object}</b> the template structure with replaced variables </p><br/><pre id="a9">constructProfilePicture : function(profile, type) {</pre><p>Check whether there is a valid picture for the user <br/><b>param {Object}</b> profile The profile object that could contain the profile picture <br/><b>param {String}</b> type The type of profile we're getting the picture for (group or user) <br/><b>return {String}</b> The link of the profile picture Will be an empty string if there is no picture </p><br/><pre id="a10">determineEmptyContent: function(content) {</pre><p>Do some checks on the content to see if it's the default Tinymce content or just empty <br/><b>param {String}</b> content Content in the form of a string <br/><b>return{Boolean}</b> True indicates that content is present, False indicates that there is no content </p><br/><pre id="a11">notification : {</pre><p><b>class</b> notification  <br/><b>description</b> Utility functions related to notifications messages in Sakai3  <br/><b>namespace</b> Notifications messages </p><br/><pre id="a12">show : function(title, text, type, sticky) {</pre><p>Show notification messages <br/><b>example</b> sakai.api.Util.notification.show('Title Message', 'z2', 'z01'); <br/><b>param {String}</b> title The notification title (if it is an empty string, the title isn't shown) <br/><b>param {String}</b> text The text you want to see appear in the body of the notification <br/><b>param {Constant}</b> [type] The type of the notification. If this is not supplied, we use the type 'information' <br/><b>param {Boolean}</b> sticky The sticky (if it is true, the notification doesn't disappear without using action) </p><br/><pre id="a13">removeAll : function() {</pre><p>Remove all the notification messages that are currently visible to the user </p><br/><pre id="a14">type : {</pre><p><b>class</b> type  <br/><b>description</b> Namespace that contains all the different notification types  <br/><b>namespace</b> Notifications types </p><br/><pre id="a15">INFORMATION : $.extend(true, {}, sakai_conf.notification.type.INFORMATION),</pre><p>Object containing settings for the information notification type </p><br/><pre id="a16">ERROR : $.extend(true, {}, sakai_conf.notification.type.ERROR)</pre><p>Object containing settings for the error notification type </p><br/><pre id="a17">progressIndicator: {</pre><p>Allows you to show a progress indicator on the screen. Example of where this is done are the Add Content and the Create World widgets </p><br/><pre id="a18">showProgressIndicator: function(title, body) {</pre><p>Show the progress indicator on the screen <br/><b>param {Object}</b> title    Title of the indicator screen <br/><b>param {Object}</b> body     Additional text to be shown in the indicator </p><br/><pre id="a19">hideProgressIndicator: function() {</pre><p>Hide the existing progress indicator (if there is one) </p><br/><pre id="a20">parseSakaiDate : function(dateInput) {</pre><p>Parse a ISO8601 date into a JavaScript date object.  &lt;p&gt; Supported date formats: &lt;ul&gt; &lt;li&gt;2010&lt;/li&gt; &lt;li&gt;2010-02&lt;/li&gt; &lt;li&gt;2010-02-18&lt;/li&gt; &lt;li&gt;2010-02-18T07:44Z&lt;/li&gt; &lt;li&gt;1997-07-16T19:20+01:00&lt;/li&gt; &lt;li&gt;1997-07-16T19:20:30+01:00&lt;/li&gt; &lt;li&gt;1269331220896&lt;/li&gt; &lt;/ul&gt; &lt;/p&gt;  &lt;p&gt; External links: &lt;ul&gt; &lt;li&gt;&lt;a href='http://www.w3.org/TR/NOTE-datetime'&gt;W3C datetime documentation&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href='http://delete.me.uk/2005/03/iso8601.html'&gt;ISO8601 JavaScript function&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href='http://confluence.sakaiproject.org/display/KERNDOC/KERN-643+Multiple+date+formats+in+the+back-end'&gt;Specification&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/p&gt;  <br/><b>param {String|Integer}</b> dateInput The date that needs to be converted to a JavaScript date object. If the format is in milliseconds, you need to provide an integer, otherwise a string <br/><b>return {Date}</b> JavaScript date object </p><br/><pre id="a21">parseRFC822Date : function(dateString) {</pre><p>Parse an RFC822 date into a JavaScript date object. Examples of RFC822 dates: Wed, 02 Oct 2002 13:00:00 GMT Wed, 02 Oct 2002 13:00:00 +0200  <br/><b>param {String}</b> dateString <br/><b>return {Date}</b>  a Javascript date object </p><br/><pre id="a22">insertTag : function(tagname, attributes) {</pre><p>Generic function that will insert an HTML tag into the head of the document. This will be used to both insert CSS and JS files <br/><b>param {Object}</b> tagname Name of the tag we want to insert. This is supposed to be 'link' or 'script'. <br/><b>param {Object}</b> attributes A JSON object that contains all of the attributes we want to attach to the tag we're inserting. The keys in this object are the attribute names, the values in the object are the attribute values </p><br/><pre id="a23">checkForTag : function(tagname, attributes) {</pre><p>Check to see if the tag+attributes combination currently exists in the DOM  <br/><b>param {Object}</b> tagname Name of the tag we want to insert. This is supposed to be 'link' or 'script'. <br/><b>param {Object}</b> attributes A JSON object that contains all of the attributes we want to attach to the tag we're inserting. The keys in this object are the attribute names, the values in the object are the attribute values <br/><b>return {jQuery|Boolean}</b> returns the selected objects if found, otherwise returns false </p><br/><pre id="a24">js : function(url) {</pre><p>Load a JavaScript file into the document <br/><b>param {String}</b> URL of the JavaScript file relative to the parent dom. </p><br/><pre id="a25">css : function(url) {</pre><p>Load a CSS file into the document <br/><b>param {String}</b> URL of the CSS file relative to the parent dom. </p><br/><pre id="a26">Sorting : {</pre><p><b>class</b> Sorting  <br/><b>description</b> Sorting algorithms  <br/><b>namespace</b> Sorting functions </p><br/><pre id="a27">naturalSort: function(a, b) {</pre><p>Natural sorting algorithm, for sorting file lists etc. <br/><b>example</b> sakai.api.Util.Sorting('z1', 'z2', 'z01'); <br/><b>param {String|Integer|Number}</b> a The first element you want to sort <br/><b>param {String|Integer|Number}</b> b The second element you want to sort <br/><b>return {Integer}</b> [0 | 1 | -1] &lt;ul&gt; &lt;li&gt;-1: sort a so it has a lower index than b&lt;/li&gt; &lt;li&gt;0: a and b are equal&lt;/li&gt; &lt;li&gt;1: sort b so it has a lower index than a&lt;/li&gt; &lt;/ul&gt; </p><br/><pre id="a28">loadSkinsFromConfig : function() {</pre><p>loadSkins Loads in any skins defined in sakai.config.skinCSS </p><br/><pre id="a29">setPageTitle : function(title, targetLevel) {</pre><p>Sets the browsers title  <br/><b>param {String}</b> title The string to be added to the page title <br/><b>param {String}</b> targetLevel Change the specified component of the page title only </p><br/><pre id="a30">var convertToHierarchy = function(directory) {</pre><p>Converts directory array into a node structure so that it can be rendered into the jstree.  <br/><b>param {Object}</b> directory list of directories <br/><b>return</b> result the json object in the structure necessary to render in jstree </p><br/><pre id="a31">var buildNodeRecursive = function(node_id, directory, url, parent_title) {</pre><p>Recursive method that create the node structure so that it can be rendered into the jstree.  <br/><b>param {String}</b> node_id  the unique id for each node for example firstyearcourses <br/><b>param {Object}</b> directory directory list json object for example 'collegeofengineering': { ... } <br/><b>param {String}</b> url the url of the page to render when directory node is clicked for example /directory#collegeofengineering  <br/><b>return</b> node the json object in the structure necessary to render in jstree </p><br/><pre id="a32">getValueForDirectoryKey : function( key, _directory ) {</pre><p>Recursive function that gets the title corresponding to an ID in the directory <br/><b>param {Object}</b> key Key to get title for <br/><b>param {Object}</b> child Object to check for children next, if not supplied start with first child </p><br/><pre id="a33">getValueForDirectoryTag: function( tag ) {</pre><p>Get the string value for a directory tag directory/medicineanddentistry/clinicalmedicine =&gt; Medicine and Dentistry » Clinical Medicine  <br/><b>param {String}</b> tag The directory tag <br/><b>return {String}</b> The printable tag </p><br/><pre id="a34">createActivity : function(nodeUrl, appID, templateID, extraData, callback) {</pre><p>Wrapper function for creating a Nakamura activity  <br/><b>param</b> nodeUrl {String} The URL of the node we would like the activity to be stored on <br/><b>param</b> appID {String} The ID of the application/functionality creating the activity <br/><b>param</b> templateID {String} The ID of the activity template <br/><b>param</b> extraData {Object} Any extra data which will be stored on the activity node <br/><b>param</b> callback {Function} Callback function executed at the end of the operation <br/><b>returns</b> void </p><br/><pre id="a35">getCurrentGMTTime : function() {</pre><p>Returns the current time in GMT milliseconds from the epoch </p><br/><pre id="a36">safeURL: function(str) {</pre><p>A version of encodeURIComponent that does not encode i18n characters when using utf8.  The javascript global encodeURIComponent works on the ascii character set, meaning it encodes all the reserved characters for URI components, and then all characters above Char Code 127. This version uses the regular encodeURIComponent function for ascii characters, and passes through all higher char codes.  At the time of writing I couldn't find a version with these symantics (which may or may not be legal according to various RFC's), but this implementation can be swapped out with one if it presents itself.  <br/><b>param {String}</b> String to be encoded. <br/><b>returns</b> Encoded string. </p><br/><pre id="a37">saneHTMLAttribute: function(str) {</pre><p>Convert a string into something that is safe to put into an HTML attribute. This is made available as a modifier to TrimPath templates, as we can't call the .data() function of jQuery whilst rendering a template <br/><b>param {Object}</b> str    String to be transformed into a string safe for use in an attribute </p><br/><pre id="a38">templateCache : [],</pre><p>A cache that will keep a copy of every template we have parsed so far. Like this, we avoid having to parse the same template over and over again. </p><br/><pre id="a39">processMacros : function(url, asyncreq) {</pre><p>Process trimpath macros in html file at url, which will then be available with the macro function inside regular rendering. The optional asyncreq option allows the request to be syncronous, which would mostly be for on-demand loading (because that is happening during rendering and it needs the template to continue. ) <br/><b>function</b> <br/><b>param {String}</b> url with macros to load <br/><b>param {Boolean}</b> Optional parameter to distinguish whether the loading should happen syncronously. Default is true (async) </p><br/><pre id="a40">processLocalMacros : function(templateElement) {</pre><p>While the processMacros function allows a way to make macros that can be shared and discovered between widgets automatically, this function allows for a simpler use case where a widget developer may just want some macros for their specific widget. In this case they can put all their macros in a template element ( similar to regular template elements), and then get a macro set back that can be used in between the rest of the templates they have defined in their page.  <br/><b>param {String|jQuery}</b> Raw String or jQuery element containing the text of the macro definitions. <br/><b>return</b> An object containing the macro functions. This can be added to the context of subsequent TemplateRenderers and called like regular trimpath macros. </p><br/><pre id="a41">TemplateRenderer : function(templateElement, templateData, outputElement, doSanitize) {</pre><p>Trimpath Template Renderer: Renders the template with the given JSON object, inserts it into a certain HTML element if required, and returns the rendered HTML string <br/><b>function</b> <br/><b>param {String|Object}</b> templateElement The name of the template HTML ID or a jQuery selection object. <br/><b>param {Object}</b> templateData JSON object containing the template data <br/><b>param {Object}</b> outputElement (Optional) jQuery element in which the template needs to be rendered <br/><b>param {Boolean}</b> doSanitize (Optional) perform html sanitization. Defaults to true </p><br/><pre id="a42">escapeHTML : function(inputString) {</pre><p>Encodes the HTML characters inside a string so that the HTML characters (e.g. &lt;, &gt;, ...) are treated as text and not as HTML entities  <br/><b>param {String}</b> inputString  String of which the HTML characters have to be encoded  <br/><b>returns {String}</b> HTML Encoded string </p><br/><pre id="a43">unescapeHTML : function(inputString) {</pre><p>Unescapes HTML entities in a string  <br/><b>param {String}</b> inputString  String of which the HTML characters have to be unescaped  <br/><b>returns {String}</b> normal HTML string </p><br/><pre id="a44">replaceURL : function(message) {</pre><p>Represent URL if any in an anchor tag. <br/><b>param {Object}</b> message Message that user has entered. </p><br/><pre id="a45">saneHTML : function(inputHTML) {</pre><p>Sanitizes HTML content. All untrusted (user) content should be run through this function before putting it into the DOM  <br/><b>param</b> inputHTML {String} The content string we would like to sanitize  <br/><b>returns {String}</b> Escaped and sanitized string </p><br/><pre id="a46">var removeExpression = function(cssStyle) {</pre><p>Remove expressions from a CSS style (only an issue in IE) <br/><b>param {String}</b> cssStyle The CSS style we want to remove expressions from <br/><b>return {String}</b> A CSS style that doesn't contain an expression </p><br/><pre id="a47">send404 : function() {</pre><p>Function that can be called by pages that can't find the content they are supposed to show. </p><br/><pre id="a48">send403 : function() {</pre><p>Function that can be called by pages that don't have the permission to show the content they should be showing </p><br/><pre id="a49">sendToLogin : function() {</pre><p>Function that can be called by pages that require a login first </p><br/><pre id="a50">renderMath : function(element) {</pre><p>Runs MathJax over an element replacing any math TeX with rendered formulas  <br/><b>param</b> element {String} The element (or it's id) that should be checked for math </p><br/><pre id="a51">makeSafeTag : function(tag) {</pre><p>Sling doesn't like certain characters in the tags So we escape them here /:;,[]*'"| </p><br/><pre id="a52">makeUniqueURL : function(desiredURL, secondaryURL, structure) {</pre><p>Make a unique URL, given a primary and secondary desired url and a structure passed in to ensure uniqueness of the key. The first argument will be used as the primary URL, and used if possible. The second argument will be used if passed, but if none of these work, or if the second argument isn't passed and the first argument doesn't work, the first argument will be appended with '0', '1', etc until a unique key for the structure is found. That string will be returned.  <br/><b>param {String}</b> desiredURL The URL (or object key) you'd like to use first <br/><b>param {String}</b> secondaryURL The URL (or orject key) that you'd like to use as a backup in case the desiredURL isn't available. Pass null here if you want to use the number-append feature <br/><b>param {Object}</b> structure The structure to test against its top-level keys for uniqueneness of the URL/key </p><br/><pre id="a53">hideOnClickOut : function(elementToHide, ignoreElements, callback) {</pre><p>Sets up events to hide a dialog when the user clicks outside it  <br/><b>param</b> elementToHide {String} a jquery selector, jquery object, dom element, or array thereof containing the element to be hidden, clicking this element or its children won't cause it to hide <br/><b>param</b> ignoreElements any elements that match a jquery.is(ignoreElements) will not hide the target element when clicked <br/><b>param</b> callback {function} a function to be called instead of the default jquery.hide() </p><br/><pre id="a54">setup : function(dialogContainer, options, addClose) {</pre><p>Sets jqmodal options  <br/><b>param</b> dialogContainer {String} a jquery selector or jquery object, that is the dialog container <br/><b>param</b> options {Object} object containing options to pass to the jqmodal plugin <br/><b>param</b> addClose {String} a jquery selector or jquery object used in the jqmAddClose function </p><br/><pre id="a55">open : function(dialogContainer, openOptions) {</pre><p>Opens the dialog box  <br/><b>param {String}</b> dialogContainer a jquery selector or jquery object, that is the dialog container <br/><b>param {Object}</b> openOptions optional object containing options to apply when opening the dialog: positionDialog {Boolean} true to position the dialog at the scroll position positionOffset {Integer} dialog height position offset bindKeyboardFocus {Boolean} true to trap keyboard focus inside the dialog bindKeyboardFocusIgnoreElements {String} optional jquery selector for start/end elements to be ignored bindKeyboardCloseFunction {Function} optional function to be called when the user hits the escape key </p><br/><pre id="a56">close : function(dialogContainer) {</pre><p>Closes the dialog box  <br/><b>param {String}</b> dialogContainer a jquery selector or jquery object, that is the dialog container </p><br/><pre id="a57">positionDialogBox : function(el, offset) {</pre><p>Positions the dialog box at the users scroll position  <br/><b>param {String}</b> el a jquery selector or jquery object, to position <br/><b>param {Integer}</b> offset optional numeric value to add to the dialog position offset </p><br/><pre id="a58">bindDialogFocus : function(dialogContainer, ignoreElements, closeFunction) {</pre><p>Sets up events to keep keyboard focus within the dialog box and close it when the escape key is pressed  <br/><b>param {String}</b> dialogContainer a jquery selector or jquery object which is the dialog container <br/><b>param {String}</b> ignoreElements an optional jquery selector for start/end elements to be ignored <br/><b>param {Function}</b> closeFunction an optional function to be called when the user hits the escape key </p><br/><pre id="a59">extractEntity : function(pathname) {</pre><p>Extracts the entity ID from the URL also handles encoded URLs Example: input: '/~user1' return: 'user1' Encoded Exmaple: input: '/%7E%D8%B4%D8%B3' return: 'شس'  <br/><b>param {String}</b> pathname The window.location.pathname <br/><b>return {String}</b> The entity ID </p><br/><pre id="a60">setup: function( element, options, callback, _dataFn ) {</pre><p>Autosuggest for users and groups (for other data override the source parameter). setup method creates a new autosuggest on the element (a jQuery object or selector string that is passed to jQuery) and also sets a namespace .data() so autosuggest won't be created more than once, with the original element as its value. The original element is retrieved in the destroy method to replace the autosuggest.  <br/><b>param {String|Object}</b> jQuery selection object or selector string. <br/><b>param {Object}</b> JavaScript object of optional parameters to extend or override defaults <br/><b>param {function}</b> optional callback to be executed after calling autosuggest plugin  <br/><b>returns {Object}</b> new jQuery object with autosuggest </p><br/><pre id="a61">reset: function( $element ) {</pre><p>Resets the autosuggest without destroying/creating. Use this when the autosuggest is in an element whose visibility is toggled, e.g. via a 'Cancel' button which should have the effect of clearing the autosuggest. The autosuggest plugin has no reset method, and it maintains a 'prev' variable that holds the last typed character. Clearing the input field isn't sufficient, if the same character is typed next time it will match the stored character and return false, so the keydown after clearing the input clears the var in the plugin.  <br/><b>param {String}</b> $element The element (or a jQuery selector string) for the text input for the autosuggest  <br/><b>returns {Object}</b> the jQuery object created from setup method </p><br/><pre id="a62">destroy: function( element, options ) {</pre><p>Removes the autosuggest and replaces it with the original element stored in .data() under the 'namespace' key when the autosuggest was created. Because it stores the original element, and this isn't a jQuery plugin that iterates over all matching selectors, this method only works if a single element is passed in. In practice it's probably not likely to pass multiple elements in the selector when creating the autosuggest (if that's really needed, then modifications to the plugin are more appropriate).  <br/><b>param</b> element {Object} The autosuggest element (a jQuery object); usually the returned from the setup method <br/><b>param {Object}</b> JavaScript object of optional parameters; currently only the namespace key  <br/><b>returns {Object}</b> original jQuery object without autosuggest </p><br/><pre id="a63">setupTagAndCategoryAutosuggest: function($elt, options, $list_categories_button, initialSelections, callback) {</pre><p>Set up the tag + category autosuggest box  <br/><b>param {jQuery}</b> $elt The element to set up as the autosuggest box <br/><b>param {Object}</b> options Options to pass through to the autoSuggest setup <br/><b>param {jQuery}</b> $list_categories_button The button that should trigger the assignlocation overlay <br/><b>param {Array}</b> initialSelections The inital selections for the autosuggest, direct from the profile <br/><b>param {Function}</b> callback Function to call after setup is complete </p><br/><pre id="a64">getTagsAndCategories: function($elt, merge, longform) {</pre><p>Get the tags and categories from the autosuggest box  <br/><b>param {jQuery}</b> $elt The element which you passed to the autoSuggest setup method <br/><b>param {Boolean}</b> merge If the tags and categories should be merged on return <br/><b>param {Boolean}</b> longform When true, the categories returned will be the full object instead of just the path string ('directory/category/child') <br/><b>return {Object}</b> Two arrays, categories and tags - OR - one array of tags and categories if merge === true </p><br/><pre id="a65">validate: function($form, opts, insertAfterLabel) {</pre><p>A wrapper for jquery.validate, so we can perform the same errorPlacement on each form, without any duplicated code  <br/><b>param {jQuery}</b> $form the jQuery element of the form in question <br/><b>param {Object}</b> opts options to pass through to jquery.validate NOTE: There is one additional option you can pass in -- an error callback function When there is an error in validation detected, it will be called NOTE: Additional option 'errorsShown' can hold a function that is executed after the error labels have been displayed on screen. <br/><b>param {Function}</b> [invalidCallback] The function to call when an error is detected <br/><b>param {Boolean}</b> [insertAfterLabel] Insert the error span after the label, not before </p><br/><pre id="a66">setDraggableParameters: function(params) {</pre><p>Sets and overrides default parameters for the jQuery Droppable plugin <br/><b>param {Object}</b> params Optional parameters that override defaults </p><br/><pre id="a67">setupDraggable: function(params, $container) {</pre><p>Sets up draggables accross the page <br/><b>param {Object}</b> params Optional parameters that override defaults <br/><b>param {Object}</b> $container Optional container element to add draggables, defaults to $('html') if not set </p><br/><pre id="a68">setIFrameFix: function() {</pre><p>When dragging elements over the screen, there are issues with iframes as they can make the drag action hang when hovering over them. Therefore, we apply an almost transparent div on top of the screen. This avoids the iframe events to be triggered and allows for smooth dragging and dropping </p><br/><pre id="a69">removeIFrameFix: function() {</pre><p>Remove the transparant div that makes sure that dragging is smooth despite iFrames being present on the screen </p><br/><pre id="a70">setDroppableParameters: function() {</pre><p>Sets and overrides default parameters for the jQuery Draggable plugin <br/><b>param {Object}</b> params Optional parameters that override defaults </p><br/><pre id="a71">setupDroppable: function(params, $container) {</pre><p>Sets up droppables accross the page <br/><b>param {Object}</b> params Optional parameters that override defaults <br/><b>param {Object}</b> $container Optional container element to add droppables, defaults to $('html') if not set </p><br/><pre id="a72">replaceInObject: function(obj, toReplace, replacement) {</pre><p>Do a deep search and replace in an object  <br/><b>param {Object}</b> obj The object to replace values in <br/><b>param {String}</b> toReplace The value to search for <br/><b>param {String}</b> replacement The string to replace the value with <br/><b>return {Object}</b> The object with the string replaced in all occurrences </p><br/></body></html>