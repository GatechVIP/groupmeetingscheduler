<!doctype html><html><head><title>Doc</title><body><dl><dd><a href="#a0">define(</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a1">createUser </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a2">updateUserProfile</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a3">removeUser </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a4">getUser</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a5">getMultipleUsers</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a6">login </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a7">logout </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a8">getProfileBasicElementValue </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a9">setProfileBasicElementValue </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a10">loadMeData </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a11">getProfilePicture </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a12">getFirstName </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a13">getDisplayName </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a14">getShortDescription </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a15">getConnectionState </a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a16">preparePeopleForRender</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a17">loadPrivacySettings</a></dd><dd>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a18">savePrivacySettings</a></dd></dl><pre id="a0">define(</pre><p><b>class</b> User  <br/><b>description</b> Advanced user related functionality, especially common actions that originate from a logged in user. This should only hold functions which are used across multiple pages, and does not constitute functionality related to a single area/page  <br/><b>namespace</b> Advanced user related functionality, especially common actions that originate from a logged in user. </p><br/><pre id="a1">createUser : function(username, firstName, lastName, email, password, passwordConfirm, extraOptions, callback) {</pre><p><b>param {Object}</b> extraOptions can include recaptcha: {challenge, response}, locale : 'user_LOCALE', template: 'templateName' </p><br/><pre id="a2">updateUserProfile: function( userid, section, data, tags, sectionData, multiple, callback ) {</pre><p>Update a user's profile  <br/><b>param {String}</b> userid The userid of the user to update their profile <br/><b>param {String}</b> section The profile section (ie basic, publications) <br/><b>param {Object}</b> data The data to save on this section <br/><b>param {Array}</b> tags The tags and categories on this user <br/><b>param {Object}</b> sectionData The current data for this section, before any updates. Used for saving tags on the user. <br/><b>param {Boolean}</b> multiple If this is a multi-assign section, like publications <br/><b>param {Function}</b> callback The callback function for after the data has been saved </p><br/><pre id="a3">removeUser : function(userid, callback) {</pre><p>Remove the user credentials in the Sakai OAE system. Note that this doesn't actually remove the user, only its permissions.  <br/><b>example</b> sakai.api.User.createUser({ 'firstName': 'User', 'lastName': '0', 'email': 'user.0<br/><b>sakatest</b>.edu', 'pwd': 'test', 'pwdConfirm': 'test', ':name': 'user0' });  <br/><b>param {String}</b> userid The id of the user you want to remove from the system <br/><b>param {Function}</b> [callback] A callback function which will be called after the request to the server. </p><br/><pre id="a4">getUser: function(userid, callback) {</pre><p>Gets the profile data for a user <br/><b>param {String}</b> userid The userId to fetch the profile for <br/><b>param {Function}</b> callback Callback function to call when the request is complete </p><br/><pre id="a5">getMultipleUsers: function(userArray, callback) {</pre><p>Gets the profile data for multiple users <br/><b>param {Array}</b> userArray Array of userIds to fetch the profiles for <br/><b>param {Function}</b> callback Callback function to call when the request is complete </p><br/><pre id="a6">login : function(credentials, callback) {</pre><p>Log-in to Sakai OAE  <br/><b>example</b> sakai.api.User.login({ 'username': 'user1', 'password': 'test' });  <br/><b>param {Object}</b> credentials JSON object container the log-in information. Contains the username and password. <br/><b>param {Function}</b> [callback] Callback function that is called after sending the log-in request to the server. </p><br/><pre id="a7">logout : function(callback) {</pre><p>Log-out from Sakai OAE  <br/><b>example</b> sakai.api.user.logout(); <br/><b>param {Function}</b> [callback] Callback function that is called after sending the log-in request to the server. </p><br/><pre id="a8">getProfileBasicElementValue : function(profile, eltName) {</pre><p>Safely retrieves an element value from the user's profile  <br/><b>param {Object}</b> profile the user's profile (data.me.profile for the current user) <br/><b>param {String}</b> eltName the element name to retrieve the value for <br/><b>return {String}</b> the value of the element name provided </p><br/><pre id="a9">setProfileBasicElementValue : function(profile, eltName, eltValue) {</pre><p>Sets a value to the user's basic profile information  <br/><b>param {Object}</b> profile the user's profile (data.me.profile for the current user) <br/><b>param {String}</b> eltName the element name to retrieve the value for <br/><b>param {String}</b> eltValue the value to place in the element </p><br/><pre id="a10">loadMeData : function(callback) {</pre><p>Retrieves all available information about a logged in user and stores it under data.me object. When ready it will call a specified callback function  <br/><b>param {Function}</b> [callback] A function which will be called when the information is retrieved from the server. The first argument of the callback is a boolean whether it was successful or not, the second argument will contain the retrieved data or the xhr object <br/><b>return {Void}</b> </p><br/><pre id="a11">getProfilePicture : function(profile) {</pre><p>Retrieves the profile picture for the user  <br/><b>param {Object}</b> profile the users profile (data.me.profile for the current user) <br/><b>return {String}</b> the url for the profile picture </p><br/><pre id="a12">getFirstName : function(profile, doSafeOutput) {</pre><p>Retrieves the first name display to use for the user from config and parses it from the profile elements  <br/><b>param {Object}</b> profile the user's profile (data.me.profile for the current user) <br/><b>param {Boolean}</b> doSafeOutput (Optional) perform html safe output. Defaults to true <br/><b>return {String}</b> the first name to show for a user </p><br/><pre id="a13">getDisplayName : function(profile, doSafeOutput) {</pre><p>Retrieves the display name to use for the user from config and parses it from the profile elements  <br/><b>param {Object}</b> profile the user's profile (data.me.profile for the current user) <br/><b>param {Boolean}</b> doSafeOutput (Optional) perform html safe output. Defaults to true <br/><b>return {String}</b> the name to show for a user </p><br/><pre id="a14">getShortDescription : function(profile) {</pre><p>Get a user's short description from their profile This is based off of the configuration in config.js Example: '${role} in ${department}' could translate to 'Undergraduate Student in Computer Science' based on the configuration in config.js and the user's profile information If the user doesn't have the profile information requested by config.js, the function will remove the token from the string and any modifiers before the token after the previous token In the above example, if the user only had a department, the resulting string would be 'Computer Science'  <br/><b>param {Object}</b> profile The user's profile to get a description from <br/><b>return {String}</b> the user's short description </p><br/><pre id="a15">getConnectionState : function(userid, callback) {</pre><p>Get a contacts connection state, or return false if user is not a contact  <br/><b>param {String}</b> the user's ID <br/><b>param {Function}</b> [callback] A function which will be called when the information is retrieved from the server. </p><br/><pre id="a16">preparePeopleForRender: function(results, meData) {</pre><p>Function to process search results for users  <br/><b>param {Object}</b> results Search results to process <br/><b>param {Object}</b> meData User object for the user <br/><b>returns {Object}</b> results Processed results </p><br/><pre id="a17">loadPrivacySettings: function(callback) {</pre><p>Load the privacy settings for the current user's account <br/><b>param {Function}</b> callback    Function to call once the privacy setting has been retrieved. Returns 'public' for public user accounts or 'everyone' for user accounts that are only visible to logged in users </p><br/><pre id="a18">savePrivacySettings: function(option, callback) {</pre><p>Store new account privacy settings for the current user. This can either make the account public or only visible to logged in users <br/><b>param {String}</b> option         'public' for a public account or 'everyone' for an account that's only visible to logged in users <br/><b>param {Function}</b> callback     Function to call once the privacy setting has been stored. Returns true when the change was successful and false when the change failed </p><br/></body></html>